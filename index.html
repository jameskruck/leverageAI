<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persuasion Impossible - James Kruck, PhD</title>
    <meta name="description" content="Explore how generative AI can enhance persuasive abilities and help tackle seemingly impossible persuasive challenges.">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <nav class="bg-white shadow-sm py-4 sticky top-0 z-10" aria-label="Main Navigation">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center">
                <div>
                    <a href="index.html" class="font-bold text-xl text-blue-600" aria-label="James Kruck, PhD Home Page">James Kruck, PhD</a>
                </div>
                <div class="hidden md:block" aria-label="Desktop Navigation">
                    <div class="flex space-x-8">
                        <a href="https://jameskruck.com/index.html" class="text-gray-700 hover:text-blue-600 transition">Home</a>
                        <a href="https://jameskruck.com/projects.html" class="text-gray-700 hover:text-blue-600 transition">Projects</a>
                        <a href="index.html" class="text-blue-600 font-medium" aria-current="page">Persuasion Impossible</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-500 hover:text-gray-600 p-2" aria-expanded="false" aria-controls="mobile-menu" aria-label="Open menu">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile menu, hidden by default -->
        <div id="mobile-menu" class="mobile-menu" aria-label="Mobile Navigation">
            <div class="flex flex-col space-y-3">
                <a href="https://jameskruck.com/index.html" class="text-gray-700 hover:text-blue-600 transition py-2 px-3 rounded-md">Home</a>
                <a href="https://jameskruck.com/projects.html" class="text-gray-700 hover:text-blue-600 transition py-2 px-3 rounded-md">Projects</a>
                <a href="index.html" class="text-blue-600 font-medium py-2 px-3 rounded-md bg-blue-50">Persuasion Impossible</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero hero-blue" aria-labelledby="hero-heading">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="md:flex items-center">
                <div class="md:w-2/3">
                    <h1 id="hero-heading" class="text-3xl md:text-4xl font-bold text-gray-900 leading-tight mb-4">
                        Persuasion Impossible
                    </h1>
                    <p class="text-xl text-gray-800 mb-6">
                        Exploring how AI collaboration can help tackle seemingly impossible persuasive challenges.
                    </p>
                    <div class="flex flex-wrap gap-3 mb-6" aria-label="Workshop focus areas">
                        <span class="tag tag-blue">Collaborative AI</span>
                        <span class="tag tag-purple">Persuasive Challenges</span>
                        <span class="tag tag-green">Creative Problem-Solving</span>
                        <span class="tag tag-orange">Strategic Communication</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main id="main-content" class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="content-section">
            <h2 class="text-2xl font-bold mb-4">Welcome to Persuasion Impossible</h2>
            <p class="mb-4">This icebreaker activity introduces you to collaborative AI interaction through a fun, low-stakes challenge. Before we dive into the workshop's main content, let's get comfortable working with an AI assistant.</p>
            <p class="mb-6">Try using the AI chat below to explore a creative persuasive scenario - no pressure, just experimentation!</p>
        </div>

        <!-- Persuasion Challenge Section -->
        <div class="content-section">
            <h3 class="text-xl font-semibold mb-4">Persuasion Challenge: From Impossible to Achievable</h3>
            <p class="mb-4">What kinds of persuasive tasks feel nearly impossible? Try using AI to help tackle a persuasive challenge that would be difficult to achieve on your own.</p>
            
            <div class="bg-white p-4 rounded shadow-sm mb-4">
                <h4 class="text-sm font-medium text-blue-600">Example Challenge:</h4>
                <p class="text-sm mt-1">"Create a compelling argument for a policy position that's opposite to your own beliefs."</p>
            </div>
            
            <!-- Interactive AI Chat -->
            <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
                <h3 class="text-lg font-semibold mb-3">Try it yourself!</h3>
                <p class="mb-4">Work with the AI assistant below to explore how collaboration can enhance your persuasive abilities. Start by sharing a persuasive challenge that feels difficult or "impossible" to you.</p>
                
                <div id="chat-container" class="border rounded-lg mb-4">
                    <div id="chat-messages" class="p-4 h-64 overflow-y-auto bg-gray-50">
                        <div class="flex justify-start mb-4">
                            <div class="bg-white border rounded-lg py-2 px-4 max-w-[80%]">
                                Hello! I'm here to help with persuasive challenges. What persuasive task feels difficult or "impossible" to you? For example:
                                <br><br>
                                • Persuading someone with strong opposing views
                                <br>
                                • Creating compelling content outside your expertise
                                <br>
                                • Crafting messages for unfamiliar audiences
                                <br><br>
                                Let's collaborate to make the impossible possible!
                            </div>
                        </div>
                    </div>
                    <div class="flex border-t p-2">
                        <input type="text" id="chat-input" placeholder="Describe your persuasive challenge..." class="flex-1 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-lg">
                        <button onclick="sendMessage()" class="ml-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition focus:outline-none focus:ring-2 focus:ring-blue-500">Send</button>
                    </div>
                </div>
            </div>
            
            <div class="bg-blue-50 p-5 rounded-lg border border-blue-100 mb-6">
                <h3 class="text-lg font-semibold mb-3">Effective Collaboration Strategies</h3>
                <ul class="list-disc pl-6 space-y-2">
                    <li>"Ask the AI to analyze the audience you're trying to persuade."</li>
                    <li>"Have the AI help identify potential counterarguments to strengthen your position."</li>
                    <li>"Request feedback on your persuasive approach from different perspectives."</li>
                    <li>"Use AI to help translate complex concepts into compelling narratives."</li>
                    <li>"Explore different persuasive frameworks or structures for your message."</li>
                </ul>
            </div>
            
            <div class="flex justify-end">
                <a href="activity1.html" class="bg-blue-600 text-white font-semibold px-6 py-3 rounded-md hover:bg-blue-700 transition focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                    Next: Document Your Process
                </a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="mb-4">© 2025 James Kruck, PhD. All rights reserved.</p>
            <p class="text-gray-400 text-sm">
                Designed with a focus on accessibility and inclusive design principles.
            </p>
        </div>
    </footer>

    <!-- Scroll to top button -->
    <button 
        id="scrollToTopBtn" 
        class="scroll-top-btn bg-blue-600 text-white p-3 rounded-full shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
        aria-label="Scroll to top"
    >
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
        </svg>
    </button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.2/axios.min.js"></script>
    <script>
        // Mobile menu toggle
        const menuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        menuButton.addEventListener('click', () => {
            const expanded = menuButton.getAttribute('aria-expanded') === 'true';
            menuButton.setAttribute('aria-expanded', !expanded);
            mobileMenu.classList.toggle('open');
        });
        
        // Scroll to top functionality
        const scrollToTopBtn = document.getElementById('scrollToTopBtn');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.style.opacity = '1';
            } else {
                scrollToTopBtn.style.opacity = '0';
            }
        });
        
        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Store conversation history
        let conversationHistory = [];

        // API endpoint (Backend on Render)
        const BACKEND_API = 'https://leverageai.onrender.com/chat';

        async function callChatGPT(userMessage) {
            try {
                const response = await axios.post(BACKEND_API, {
                    message: userMessage
                });

                console.log("✅ AI Response:", response.data); // Debugging log
                return response.data.response;
            } catch (error) {
                console.error('❌ Error calling AI:', error.response ? error.response.data : error);
                return `Error: ${error.response ? error.response.data.error : "Could not connect to AI."}`;
            }
        }

        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const messages = document.getElementById('chat-messages');
            const messageText = input.value.trim();

            if (!messageText) return;

            // Disable input while processing
            input.disabled = true;

            try {
                // Add user message to UI
                const userDiv = document.createElement('div');
                userDiv.className = 'flex justify-end mb-4';
                userDiv.innerHTML = `
                    <div class="bg-blue-600 text-white rounded-lg py-2 px-4 max-w-[80%]">
                        ${messageText}
                    </div>
                `;
                messages.appendChild(userDiv);

                // Clear input
                input.value = '';

                // Show typing indicator
                const typingDiv = document.createElement('div');
                typingDiv.className = 'flex justify-start mb-4 typing-indicator';
                typingDiv.innerHTML = `
                    <div class="bg-gray-100 rounded-lg py-2 px-4">
                        <span class="typing-dots">AI is thinking...</span>
                    </div>
                `;
                messages.appendChild(typingDiv);
                messages.scrollTop = messages.scrollHeight;

                // Call AI
                const response = await callChatGPT(messageText);

                // Remove typing indicator
                const typingIndicator = messages.querySelector('.typing-indicator');
                if (typingIndicator) {
                    messages.removeChild(typingIndicator);
                }

                // Add AI response
                const aiDiv = document.createElement('div');
                aiDiv.className = 'flex justify-start mb-4';
                aiDiv.innerHTML = `
                    <div class="bg-white border rounded-lg py-2 px-4 max-w-[80%]">
                        ${response}
                    </div>
                `;
                messages.appendChild(aiDiv);

            } catch (error) {
                // Remove typing indicator
                const typingIndicator = messages.querySelector('.typing-indicator');
                if (typingIndicator) {
                    messages.removeChild(typingIndicator);
                }

                // Show error message
                const errorDiv = document.createElement('div');
                errorDiv.className = 'flex justify-center mb-4';
                errorDiv.innerHTML = `
                    <div class="bg-red-100 text-red-700 rounded-lg py-2 px-4">
                        ${error.message}
                    </div>
                `;
                messages.appendChild(errorDiv);
            } finally {
                // Re-enable input
                input.disabled = false;
                input.focus();
                
                // Scroll to bottom
                messages.scrollTop = messages.scrollHeight;
            }
        }

        // Handle Enter key in chat
        document.getElementById('chat-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Initialize
        window.onload = function() {
            console.log("🚀 Page Loaded: AI Chat Ready");
        };
    </script>
</body>
</html>